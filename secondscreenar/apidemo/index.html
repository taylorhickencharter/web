<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Second Screen AR Demo</title>

    <!-- We've included a slightly modified version of A-Frame, which fixes some polish concerns -->
    <script src="//cdn.8thwall.com/web/aframe/8frame-1.1.0.min.js"></script>

    <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See github.com/8thwall/web/tree/master/xrextras -->
    <!--<script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>-->
    <script src="//cdn.8thwall.com/web/aframe/aframe-extras-6.1.1.min.js"></script>

    <!-- Landing Page -->
    <script src='https://cdn.8thwall.com/web/landing-page/landing-page.js'></script>

    <!-- 8thWall Web - Replace the app key here with your own app key -->
    <script async src="//apps.8thwall.com/xrweb?appKey=LGsnIcOT01x7QUDH8djyKL7FPRh6b86q6FI1CQQ8JXjmq8jqwB9GDKbg75sx0PJ6rHjwm"></script>
  </head>

  <body>
    <a-scene
        xrextras-gesture-detector
        landing-page="
            logoSrc: #logo;
            logoAlt: Spectrum;
            backgroundColor: linear-gradient(#003057, #0099D8);
            mediaSrc: #demo-video;
            mediaAlt: Demo Video;
            mediaAutoplay: false;
            mediaControls: browser;"
        xrextras-loading
        xrextras-runtime-error
        renderer="colorManagement:true; webgl2: true;"
        xrweb="allowedDevices: mobile">

        <xrextras-resource id="logo" src="./assets/spectrum-logo.png"></xrextras-resource>

        <a-assets>
            <a-asset-item id="modem-glb" src="./assets/modem-model.glb"></a-asset-item>
            <video
            id="demo-video"
            crossorigin="anonymous"
            loop="false"
            src="assets/demo-video.mp4">
            </video>
        </a-assets>

        <a-camera
            id="camera"
            position="0 8 8"
            raycaster="objects: .cantap"
            cursor="fuse: false; rayOrigin: mouse;">
        </a-camera>

        <a-entity
            light="
            type: directional;
            intensity: 0.6;
            castShadow: false;
            target: #modem;"
            xrextras-attach="target: model; offset: 1 15 3;"
            shadow>
        </a-entity>

        <a-light type="ambient" intensity="0.4"></a-light>

        <a-entity 
            id="modem" 
            gltf-model="#modem-glb" 
            class="cantap" 
            xrextras-hold-drag 
            xrextras-two-finger-rotate 
            xrextras-pinch-scale 
            scale="1 1 1" 
            animation-mixer
            animation-manager>
        </a-entity>
        
        <a-plane
            id="ground" 
            rotation="-90 0 0" 
            width="1000" 
            height="1000" 
            material="shader: shadow" 
            shadow>
        </a-plane>
    </a-scene>
  </body>
</html>
